(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[839],{7585:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/clients",function(){return r(3833)}])},184:function(e,n,r){"use strict";r.d(n,{A:function(){return l}});var t=r(5893),a=r(1159),s=function(e){var n=e.title,r=(0,a.a)().removeUser;return(0,t.jsxs)("nav",{className:"main-header navbar navbar-expand navbar-white navbar-light",children:[(0,t.jsxs)("ul",{className:"navbar-nav",children:[(0,t.jsx)("li",{className:"nav-item",children:(0,t.jsx)("a",{className:"nav-link","data-widget":"pushmenu",href:"#",role:"button",children:(0,t.jsx)("i",{className:"fas fa-bars"})})}),(0,t.jsx)("li",{className:"nav-item d-none d-sm-inline-block",children:(0,t.jsx)("a",{className:"nav-link",children:n})})]}),(0,t.jsx)("ul",{className:"navbar-nav ml-auto",children:(0,t.jsx)("li",{className:"nav-item",children:(0,t.jsxs)("a",{href:"",className:"nav-link",onClick:function(e){e.preventDefault(),r()},children:[(0,t.jsx)("i",{className:"ion-log-out pe-2"}),"LogOut"]})})})]})},c=r(1664),i=r.n(c),u=r(1163),o=function(){var e=(0,u.useRouter)(),n=function(n){return"nav-link "+(e.pathname==n?"active":"")};return(0,t.jsxs)("aside",{className:"main-sidebar sidebar-dark-primary elevation-4",children:[(0,t.jsxs)("a",{className:"brand-link",children:[(0,t.jsx)("img",{src:"dist/img/sipe.png",alt:"AdminLTE Logo",className:"brand-image img-circle elevation-3",style:{opacity:".8"}}),(0,t.jsx)("span",{className:"brand-text font-weight-light",children:"CRM"})]}),(0,t.jsx)("div",{className:"sidebar",children:(0,t.jsx)("nav",{className:"mt-2",children:(0,t.jsxs)("ul",{className:"nav nav-pills nav-sidebar flex-column","data-widget":"treeview",role:"menu","data-accordion":"false",children:[(0,t.jsx)("li",{className:"nav-item",children:(0,t.jsx)(i(),{href:"/dashboard",children:(0,t.jsxs)("a",{className:n("/dashboard"),children:[(0,t.jsx)("i",{className:"nav-icon ion-home"}),(0,t.jsx)("p",{children:"Home"})]})})}),(0,t.jsx)("li",{className:"nav-item",children:(0,t.jsx)(i(),{href:"/clients",children:(0,t.jsxs)("a",{className:n("/clients"),children:[(0,t.jsx)("i",{className:"nav-icon ion-person-stalker"}),(0,t.jsx)("p",{children:"Clients"})]})})}),(0,t.jsx)("li",{className:"nav-item",children:(0,t.jsx)(i(),{href:"/projects",children:(0,t.jsxs)("a",{className:n("/projects"),children:[(0,t.jsx)("i",{className:"nav-icon ion-document"}),(0,t.jsx)("p",{children:"Projects"})]})})}),(0,t.jsx)("li",{className:"nav-item",children:(0,t.jsx)(i(),{href:"/users",children:(0,t.jsxs)("a",{className:n("/users"),children:[(0,t.jsx)("i",{className:"nav-icon ion-person"}),(0,t.jsx)("p",{children:"Users"})]})})}),(0,t.jsx)("li",{className:"nav-item",children:(0,t.jsx)(i(),{href:"/account",children:(0,t.jsxs)("a",{className:n("/account"),children:[(0,t.jsx)("i",{className:"nav-icon ion-ios-gear"}),(0,t.jsx)("p",{children:"Account"})]})})})]})})})]})},l=function(e){var n=e.children,r=e.title;return(0,t.jsxs)("div",{className:"wrapper",children:[(0,t.jsx)(s,{title:r}),(0,t.jsx)(o,{}),(0,t.jsx)("div",{className:"content-wrapper",children:(0,t.jsx)("div",{className:"content",children:(0,t.jsx)("div",{className:"container-fluid pt-1",children:n})})}),(0,t.jsxs)("footer",{className:"main-footer",children:[(0,t.jsxs)("strong",{children:["Copyright \xa9 2014-2021 ",(0,t.jsx)("a",{href:"https://adminlte.io",children:"AdminLTE.io"}),"."]}),"All rights reserved.",(0,t.jsxs)("div",{className:"float-right d-none d-sm-inline-block",children:[(0,t.jsx)("b",{children:"Version"})," 3.2.0"]})]})]})}},1159:function(e,n,r){"use strict";r.d(n,{a:function(){return s}});var t=r(1163),a=r(7294),s=function(){var e=(0,a.useState)(null),n=e[0],r=e[1],s=(0,t.useRouter)().push,c=function(){var e=window.localStorage.getItem("CRMProject");try{e=JSON.parse(e),r((function(n){return e}))}catch(n){console.error(n)}};return(0,a.useEffect)((function(){c()}),[]),{userData:n,setUser:function(e){var n=JSON.stringify(e);window.localStorage.setItem("CRMProject",n),c()},removeUser:function(){window.localStorage.removeItem("CRMProject"),c(),s("/")}}}},3833:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return A}});var t=r(4051),a=r.n(t),s=r(5893),c=r(7294),i=r(184),u=r(450);function o(e,n,r,t,a,s,c){try{var i=e[s](c),u=i.value}catch(o){return void r(o)}i.done?n(u):Promise.resolve(u).then(t,a)}function l(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}var p=function(e){var n=e.properties,r=e.udpateClient,t=(0,c.useState)(!1),i=t[0],p=t[1],d=(0,c.useState)(!1),h=d[0],m=d[1],v=(0,c.useState)(n),f=v[0],x=v[1],j=function(){var e,n=(e=a().mark((function e(n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),m(!0),e.next=4,r(f);case 4:e.sent&&(m(!1),p(!1));case 6:case"end":return e.stop()}}),e)})),function(){var n=this,r=arguments;return new Promise((function(t,a){var s=e.apply(n,r);function c(e){o(s,t,a,c,i,"next",e)}function i(e){o(s,t,a,c,i,"throw",e)}c(void 0)}))});return function(e){return n.apply(this,arguments)}}(),b=function(e){x(function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){l(e,n,r[n])}))}return e}({},f,l({},e.target.name,e.target.value)))},g=function(){p(!i)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.zx,{color:"warning",size:"sm",block:!0,onClick:g,children:(0,s.jsx)("span",{className:"ion-edit"})}),(0,s.jsxs)(u.u_,{isOpen:i,children:[(0,s.jsx)(u.xB,{toggle:g,children:"Add Client"}),(0,s.jsxs)("form",{onSubmit:j,children:[(0,s.jsxs)(u.fe,{children:[(0,s.jsx)(u.II,{defaultValue:f.id}),(0,s.jsx)(u.II,{name:"name",bsSize:"sm",placeholder:"Name",className:"mb-1",value:f.name,onChange:b,required:!0}),(0,s.jsx)(u.II,{name:"lastName",bsSize:"sm",placeholder:"Last name",className:"mb-1",value:f.lastName,onChange:b,required:!0}),(0,s.jsx)(u.II,{name:"email",type:"email",bsSize:"sm",placeholder:"Email",className:"mb-1",value:f.email,onChange:b,required:!0}),(0,s.jsx)(u.II,{name:"phone",type:"tel",bsSize:"sm",placeholder:"Phone",className:"mb-1",value:f.phone,onChange:b,required:!0})]}),(0,s.jsx)(u.mz,{children:h?(0,s.jsx)(u.$j,{color:"primary",type:"grow",children:"Loading..."}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.zx,{color:"success",children:"Save"}),(0,s.jsx)(u.zx,{type:"reset",color:"danger",children:"Reset"})]})})]})]})]})};function d(e,n,r,t,a,s,c){try{var i=e[s](c),u=i.value}catch(o){return void r(o)}i.done?n(u):Promise.resolve(u).then(t,a)}var h=function(e){var n=e.createClient,r=(0,c.useState)(!1),t=r[0],i=r[1],o=(0,c.useState)(!1),l=o[0],p=o[1],h=function(){var e,r=(e=a().mark((function e(r){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),p(!0),t={name:r.target.name.value,lastName:r.target.lastName.value,phone:r.target.phone.value,email:r.target.email.value},e.next=5,n(t);case 5:e.sent&&(p(!1),i(!1));case 7:case"end":return e.stop()}}),e)})),function(){var n=this,r=arguments;return new Promise((function(t,a){var s=e.apply(n,r);function c(e){d(s,t,a,c,i,"next",e)}function i(e){d(s,t,a,c,i,"throw",e)}c(void 0)}))});return function(e){return r.apply(this,arguments)}}(),m=function(){i(!t)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.zx,{color:"info",size:"sm",block:!0,onClick:m,children:"Add Client"}),(0,s.jsxs)(u.u_,{isOpen:t,children:[(0,s.jsx)(u.xB,{toggle:m,children:"Add Client"}),(0,s.jsxs)("form",{onSubmit:h,children:[(0,s.jsxs)(u.fe,{children:[(0,s.jsx)(u.II,{name:"name",bsSize:"sm",placeholder:"Name",className:"mb-1",required:!0}),(0,s.jsx)(u.II,{name:"lastName",bsSize:"sm",placeholder:"Last name",className:"mb-1",required:!0}),(0,s.jsx)(u.II,{name:"email",type:"email",bsSize:"sm",placeholder:"Email",className:"mb-1",required:!0}),(0,s.jsx)(u.II,{name:"phone",type:"tel",bsSize:"sm",maxLength:10,pattern:"[0-9]{7,10}",placeholder:"Phone",className:"mb-1",required:!0})]}),(0,s.jsx)(u.mz,{children:l?(0,s.jsx)(u.$j,{color:"primary",type:"grow",children:"Loading..."}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.zx,{color:"success",children:"Save"}),(0,s.jsx)(u.zx,{type:"reset",color:"danger",children:"Reset"})]})})]})]})]})};function m(e,n,r,t,a,s,c){try{var i=e[s](c),u=i.value}catch(o){return void r(o)}i.done?n(u):Promise.resolve(u).then(t,a)}var v=function(e){var n=e.clientId,r=e.deleteClient,t=(0,c.useState)(!1),i=t[0],o=t[1],l=function(){var e,n=(e=a().mark((function e(n){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),o(!0),t={id:n.target.page_id.value},e.next=5,r(t);case 5:e.sent&&o(!1);case 7:case"end":return e.stop()}}),e)})),function(){var n=this,r=arguments;return new Promise((function(t,a){var s=e.apply(n,r);function c(e){m(s,t,a,c,i,"next",e)}function i(e){m(s,t,a,c,i,"throw",e)}c(void 0)}))});return function(e){return n.apply(this,arguments)}}();return(0,s.jsxs)("form",{onSubmit:l,children:[(0,s.jsx)(u.II,{type:"hidden",name:"page_id",defaultValue:n}),(0,s.jsx)(u.zx,{block:!0,color:"danger",size:"sm",children:i?(0,s.jsx)(u.$j,{size:"sm"}):(0,s.jsx)("span",{className:"ion-trash-a"})})]})},f=r(9669),x=r.n(f);function j(e,n,r,t,a,s,c){try{var i=e[s](c),u=i.value}catch(o){return void r(o)}i.done?n(u):Promise.resolve(u).then(t,a)}function b(e){return function(){var n=this,r=arguments;return new Promise((function(t,a){var s=e.apply(n,r);function c(e){j(s,t,a,c,i,"next",e)}function i(e){j(s,t,a,c,i,"throw",e)}c(void 0)}))}}var g="https://crm-api-three.vercel.app/api/",N=function(){var e=b(a().mark((function e(n){var r,t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g+"clients",e.prev=2,e.next=5,x().get("https://crm-api-three.vercel.app/api/clients",{headers:{Authorization:"Bearer "+n}});case 5:t=e.sent,r=t,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),r=e.t0.response;case 12:return e.prev=12,e.abrupt("return",r);case 15:case"end":return e.stop()}}),e,null,[[2,9,12,15]])})));return function(n){return e.apply(this,arguments)}}(),w=function(){var e=b(a().mark((function e(n,r){var t,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g+"clients/create",e.prev=2,e.next=5,x().post("https://crm-api-three.vercel.app/api/clients/create",r,{headers:{Authorization:"Bearer "+n}});case 5:s=e.sent,t=s,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),t=e.t0.response;case 12:return e.prev=12,e.abrupt("return",t);case 15:case"end":return e.stop()}}),e,null,[[2,9,12,15]])})));return function(n,r){return e.apply(this,arguments)}}(),k=function(){var e=b(a().mark((function e(n,r){var t,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g+"clients/update",e.prev=2,e.next=5,x().put("https://crm-api-three.vercel.app/api/clients/update",r,{headers:{Authorization:"Bearer "+n}});case 5:s=e.sent,t=s,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),t=e.t0.response;case 12:return e.prev=12,e.abrupt("return",t);case 15:case"end":return e.stop()}}),e,null,[[2,9,12,15]])})));return function(n,r){return e.apply(this,arguments)}}(),y=function(){var e=b(a().mark((function e(n,r){var t,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g+"clients/delete",e.prev=2,e.next=5,x().put("https://crm-api-three.vercel.app/api/clients/delete",r,{headers:{Authorization:"Bearer "+n}});case 5:s=e.sent,t=s,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),t=e.t0.response;case 12:return e.prev=12,e.abrupt("return",t);case 15:case"end":return e.stop()}}),e,null,[[2,9,12,15]])})));return function(n,r){return e.apply(this,arguments)}}(),S={get:N,create:w,update:k,remove:y},z=r(2858),C=r(1159);function I(e,n,r,t,a,s,c){try{var i=e[s](c),u=i.value}catch(o){return void r(o)}i.done?n(u):Promise.resolve(u).then(t,a)}function P(e){return function(){var n=this,r=arguments;return new Promise((function(t,a){var s=e.apply(n,r);function c(e){I(s,t,a,c,i,"next",e)}function i(e){I(s,t,a,c,i,"throw",e)}c(void 0)}))}}var A=function(){var e=(0,c.useState)(!1),n=(e[0],e[1],(0,c.useState)([])),r=n[0],t=n[1],o=(0,C.a)(),l=o.userData,d=o.removeUser,m=o.setUser,f=function(){var e=P(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.Z.auth(l.token_refresh);case 2:if(200!==(n=e.sent).status){e.next=8;break}return m(n.data),e.abrupt("return",n);case 8:d();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=P(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.get(l.token);case 2:if(n=e.sent,console.log(n.data),200===n.status){e.next=7;break}return f(),e.abrupt("return");case 7:t(n.data);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=P(a().mark((function e(n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,S.create(l.token,n);case 3:if(201!==e.sent.status){e.next=8;break}x(),e.next=15;break;case 8:return e.next=10,f();case 10:return r=e.sent,e.next=13,S.create(r.data.token,n);case 13:e.sent,x();case 15:return e.abrupt("return",!0);case 16:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),b=function(){var e=P(a().mark((function e(n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,S.update(l.token,n);case 3:if(200!==e.sent.status){e.next=8;break}x(),e.next=15;break;case 8:return e.next=10,f();case 10:return r=e.sent,e.next=13,S.update(r.data.token,n);case 13:e.sent,x();case 15:return e.abrupt("return",!0);case 16:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),g=function(){var e=P(a().mark((function e(n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,S.remove(l.token,n);case 3:if(200!==e.sent.status){e.next=8;break}x(),e.next=15;break;case 8:return e.next=10,f();case 10:return r=e.sent,e.next=13,S.remove(r.data.token,n);case 13:e.sent,x();case 15:return e.abrupt("return",!0);case 16:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,c.useEffect)((function(){l&&x()}),[l]),(0,c.useEffect)((function(){}),[]),(0,s.jsxs)(i.A,{title:"Clients",children:[(0,s.jsx)(u.X2,{className:"py-2 justify-content-end",children:(0,s.jsx)(u.JX,{md:2,children:(0,s.jsx)(h,{createClient:j})})}),(0,s.jsx)(u.X2,{className:"pt-1",children:(0,s.jsx)(u.JX,{children:(0,s.jsxs)(u.iA,{bordered:!0,children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"table-active",children:[(0,s.jsx)("th",{children:"#"}),(0,s.jsx)("th",{children:"Name"}),(0,s.jsx)("th",{children:"Last name"}),(0,s.jsx)("th",{children:"Email"}),(0,s.jsx)("th",{children:"Phone"}),null!==l&&"Super Admin"===l.user.rol&&(0,s.jsx)("th",{children:"State"}),(0,s.jsx)("th",{colSpan:2,style:{width:"10%"},children:"Actions"})]})}),(0,s.jsx)("tbody",{children:r.map((function(e,n){return(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:n+1}),(0,s.jsx)("td",{children:e.name}),(0,s.jsx)("td",{children:e.lastName}),(0,s.jsx)("td",{children:e.email}),(0,s.jsx)("td",{children:e.phone}),null!==l&&"Super Admin"===l.user.rol&&(0,s.jsx)("td",{className:e.active?"table-success":"table-danger",children:e.active?"Eneable":"Disable"}),(0,s.jsx)("td",{children:(0,s.jsx)(p,{properties:e,udpateClient:b})}),(0,s.jsx)("td",{children:(0,s.jsx)(v,{deleteClient:g,clientId:e.id})})]},n)}))})]})})})]})}},2858:function(e,n,r){"use strict";var t=r(4051),a=r.n(t),s=r(9669),c=r.n(s);function i(e,n,r,t,a,s,c){try{var i=e[s](c),u=i.value}catch(o){return void r(o)}i.done?n(u):Promise.resolve(u).then(t,a)}function u(e){return function(){var n=this,r=arguments;return new Promise((function(t,a){var s=e.apply(n,r);function c(e){i(s,t,a,c,u,"next",e)}function u(e){i(s,t,a,c,u,"throw",e)}c(void 0)}))}}var o="https://crm-api-three.vercel.app/api/",l=function(){var e=u(a().mark((function e(n){var r,t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o+"auth",e.prev=2,e.next=5,c().post("https://crm-api-three.vercel.app/api/auth",{},{headers:{refresh:n}});case 5:t=e.sent,r=t,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),r=e.t0.response;case 12:return e.prev=12,e.abrupt("return",r);case 15:case"end":return e.stop()}}),e,null,[[2,9,12,15]])})));return function(n){return e.apply(this,arguments)}}(),p=function(){var e=u(a().mark((function e(n){var r,t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o+"auth/login",e.prev=2,e.next=5,c().post("https://crm-api-three.vercel.app/api/auth/login",n);case 5:t=e.sent.data,r={isError:!1,response:t,message:"success"},e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),r={isError:!0,response:e.t0.response,message:e.t0.response.data.message};case 12:return e.prev=12,e.abrupt("return",r);case 15:case"end":return e.stop()}}),e,null,[[2,9,12,15]])})));return function(n){return e.apply(this,arguments)}}();n.Z={auth:l,login:p}}},function(e){e.O(0,[260,437,669,774,888,179],(function(){return n=7585,e(e.s=n);var n}));var n=e.O();_N_E=n}]);